<%= form_with(model: subscription) do |form| %>
  <% if subscription.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(subscription.errors.count, "error") %> prohibited this subscription from being saved:</h2>

      <ul>
        <% subscription.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div data-controller="subscription">

    Net Athlete: <span id="span-net" data-subscription-target="spanNet">val net</span>
    <%#= number_to_currency(@netAthlete) %> <br>
    Platform Fees:  <span id="span-platformFeesInitial" data-subscription-target="spanPlatformFeesInitial">val initial</span>
     <%#= number_to_currency(@platformFees.to_f) %> <br>

    Payment Fees: <%#= number_to_currency(@paymentFees) %><br>

    <hr>
    <strong> 
      total: <span id="span-total" data-subscription-target="spanTotal"></span>

      <%#= number_to_currency(@campaign.subscription) %> <br>
    </strong>

<hr>

  <%= form.hidden_field :prixNetInitial, value:  @netAthlete , 
          data: { subscription_target: "prixNetInitial" } %>

  <%= form.hidden_field :prixBrutInitial, value: @totalPrice, 
          data: { subscription_target: "prixBrutInitial" } %>

  <%= form.hidden_field :brut, value: @totalPrice, 
          data: { subscription_target: "prixInitial" } %>

  <%= form.hidden_field :platformFeesInitial, value: @platformFees, 
          data: { subscription_target: "platformFeesInitial" } %>

  <%= form.hidden_field :paymentFeesInitial, value: @paymentFees, 
          data: { subscription_target: "paymentFeesInitial" } %>


      <%= button_tag "toggle fees", data: { action: "click->subscription#toggleFees" }, class: "btn btn-warning" %>

  <div>
    <%#= form.label :campaign_id, style: "display: block" %>
    <%= form.hidden_field :campaign_id, value: @campaign.id %>
  </div>

  <div>
    <%#= form.label :fan_id, style: "display: block" %>
    <%= form.hidden_field :fan_id, value: @fan.id %>
  </div>

 
    <div class="container-fluid text-end mt-2 p-2"> 
      <button type="submit" class="w-100 btn btn-primary">
        <span><i class="bi bi-check"></i> Create</span>
      </button>
    </div>

  
  </div>

<% end %>
